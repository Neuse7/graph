<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D直方体の生成</title>
    <!-- Plotly.jsのCDNを読み込む -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        #graph3d {
            width: 100%;
            height: 70vh;  /* グラフの高さを画面高さの70%に設定 */
            margin: 0 auto;
        }
        .input-container {
            display: flex;
            flex-wrap: wrap;  /* 横並びにしてスペースを最大化 */
            justify-content: space-between;
            padding: 10px;
            max-width: 100%;
            margin: 0 auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
        }
        .input-container label {
            font-size: 12px;  /* ラベルのフォントサイズを小さく */
            margin-bottom: 4px;
            width: 100%;
        }
        .input-container input {
            padding: 8px;
            margin-bottom: 10px;
            font-size: 14px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 30%;  /* 横幅を30%に設定 */
        }
        h1 {
            text-align: center;
            margin-top: 10px;
            font-size: 20px;
        }
        @media (max-width: 600px) {
            .input-container {
                flex-direction: column;
                margin: 10px 0;
            }
            .input-container input {
                width: 100%;  /* スマホでは入力フィールドを100%に */
                margin-bottom: 8px;
            }
            h1 {
                font-size: 18px;
            }
            #graph3d {
                height: 60vh; /* スマホではグラフの高さを少し小さく */
            }
        }
    </style>
</head>
<body>
    <h1>3D直方体の生成</h1>
    
    <!-- 入力フォーム -->
    <div class="input-container">
        <label for="a">a (中心座標X): </label>
        <input type="number" id="a" value="0">
        <label for="b">b (中心座標Y): </label>
        <input type="number" id="b" value="0">
        <label for="c">c (中心座標Z): </label>
        <input type="number" id="c" value="0">
        <label for="x">x (X軸の範囲): </label>
        <input type="number" id="x" value="1">
        <label for="y">y (Y軸の範囲): </label>
        <input type="number" id="y" value="1">
        <label for="z">z (Z軸の範囲): </label>
        <input type="number" id="z" value="1">
    </div>
    
    <!-- 3Dグラフを表示するためのdiv -->
    <div id="graph3d"></div>

    <script>
        // 数値入力が変更されたときにグラフを更新
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('input', drawCuboid);
        });

        function drawCuboid() {
            // 入力値を取得
            var a = parseFloat(document.getElementById('a').value);
            var b = parseFloat(document.getElementById('b').value);
            var c = parseFloat(document.getElementById('c').value);
            var x = parseFloat(document.getElementById('x').value);
            var y = parseFloat(document.getElementById('y').value);
            var z = parseFloat(document.getElementById('z').value);

            // 直方体の各頂点の座標を計算
            var vertices = [
                [a - x, b - y, c - z], [a + x, b - y, c - z],
                [a + x, b + y, c - z], [a - x, b + y, c - z],
                [a - x, b - y, c + z], [a + x, b - y, c + z],
                [a + x, b + y, c + z], [a - x, b + y, c + z]
            ];

            // 直方体の辺を構成する点を結ぶためのラインセグメント
            var edges = [
                [0, 1], [1, 2], [2, 3], [3, 0],
                [4, 5], [5, 6], [6, 7], [7, 4],
                [0, 4], [1, 5], [2, 6], [3, 7]
            ];

            // 座標軸に対応する x, y, z の値を分けて配列に格納
            var x_vals = [], y_vals = [], z_vals = [];
            for (var i = 0; i < vertices.length; i++) {
                x_vals.push(vertices[i][0]);
                y_vals.push(vertices[i][1]);
                z_vals.push(vertices[i][2]);
            }

            // 3D直方体を描画するためのデータ設定
            var data = [{
                type: 'scatter3d',
                mode: 'lines',
                x: x_vals,
                y: y_vals,
                z: z_vals,
                line: {
                    color: 'rgb(0, 0, 255)',
                    width: 4
                },
                text: ['', '', '', '', '', '', '', '']
            }];
            
            // 原点を大きな点で表示
            var origin = {
                type: 'scatter3d',
                mode: 'markers',
                x: [0],
                y: [0],
                z: [0],
                marker: {
                    size: 10,  // 原点のサイズを大きく
                    color: 'rgb(0, 0, 0)',  // 黒色
                    symbol: 'circle'
                }
            };

            // グラフのレイアウト設定
            var layout = {
                title: '3D直方体',
                scene: {
                    xaxis: {title: 'X軸'},
                    yaxis: {title: 'Y軸'},
                    zaxis: {title: 'Z軸'}
                },
                margin: { l: 0, r: 0, b: 0, t: 40 }  // グラフの余白を調整
            };

            // エッジを結ぶためのラインを描画
            var edge_x = [], edge_y = [], edge_z = [];
            for (var i = 0; i < edges.length; i++) {
                var start = edges[i][0];
                var end = edges[i][1];
                edge_x.push(vertices[start][0], vertices[end][0], null);
                edge_y.push(vertices[start][1], vertices[end][1], null);
                edge_z.push(vertices[start][2], vertices[end][2], null);
            }

            // エッジのデータを追加
            data.push({
                type: 'scatter3d',
                mode: 'lines',
                x: edge_x,
                y: edge_y,
                z: edge_z,
                line: {
                    color: 'rgb(255, 0, 0)',
                    width: 3
                }
            });

            // グラフを描画
            Plotly.newPlot('graph3d', data.concat([origin]), layout);
        }

        // 初期表示で直方体を描画
        drawCuboid();
    </script>
</body>
</html>
